import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';

import IndexJs from '!!raw-loader!{{CODE_PATH}}/js/helm-interop/index.js';
import IndexTs from '!!raw-loader!{{CODE_PATH}}/ts/helm-interop/index.ts';
import DeploymentYaml from '!!raw-loader!{{CODE_PATH}}/js/helm-interop/output/manifests/hello-world/deployment.yaml';
import ServiceYaml from '!!raw-loader!{{CODE_PATH}}/js/helm-interop/output/manifests/hello-world/service.yaml';
import ServiceAccountYaml from '!!raw-loader!{{CODE_PATH}}/js/helm-interop/output/manifests/hello-world/serviceaccount.yaml';

# Helm Interoperability

Helm is the most popular package manager for Kubernetes, and many Kubernetes applications are distributed as Helm charts.
Since rewriting all your Helm charts in Anemos may not be practical in short term, Anemos provides a way to use Helm charts
in your Anemos applications. This allows you to use existing Helm charts in your Anemos applications while migrating to
Anemos at your own pace.

For the migration process, you can define your options as JavaScript objects, then convert these objects to Helm values
and pass them to Helm for rendering. You can support your Helm chart as long as you want and update the chart file in
Anemos project to keep them in sync. Then when you are ready, you can generate your manifests using Anemos, removing the manifests
generated from Helm charts. You can even migrate your templates one by one, replacing the manifests generated from Helm charts
with manifests generated by Anemos.

Generating Anemos documents from Helm charts is pretty straightforward. Following example is a complete
Anemos script that generates manifests from a Helm chart, modifies them to remove the `helm.sh/chart` label,
and add an example label.

<Tabs groupId='language'>
  <TabItem value="typescript" label="TypeScript">
    <CodeBlock language="typescript" title="index.ts" showLineNumbers>
        {IndexTs}
    </CodeBlock>
  </TabItem>

  <TabItem value="javascript" label="JavaScript">
    <CodeBlock language="javascript" title="index.js" showLineNumbers>
        {IndexJs}
    </CodeBlock>
  </TabItem>
</Tabs>

Building this script will generate the following Kubernetes manifests from the specified Helm chart and
save them to the Anemos output directory.

<Tabs groupId='language'>
  <TabItem value="hello-world/deployment.yaml">
    <CodeBlock language="yaml" showLineNumbers>
        {DeploymentYaml}
    </CodeBlock>
  </TabItem>

  <TabItem value="hello-world/service.yaml">
    <CodeBlock language="yaml" showLineNumbers>
        {ServiceYaml}
    </CodeBlock>
  </TabItem>

  <TabItem value="hello-world/serviceaccount.yaml">
    <CodeBlock language="yaml" showLineNumbers>
        {ServiceAccountYaml}
    </CodeBlock>
  </TabItem>
</Tabs>
